# üéÆ Smart You ‚Äî –∏–≥—Ä–∞, –≥–¥–µ —Ç—ã —É—á–∏—à—å—Å—è –ø–∏—Å–∞—Ç—å —Å–º–∞—Ä—Ç‚Äë–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

> Smart You ‚Äî —É—á–µ–±–Ω–∞—è –∏–≥—Ä–∞ –ø–æ Solidity. –ü–∏—à–µ—à—å –∫–æ–¥ ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—à—å –º–∏–Ω–∏‚Äë–∏–≥—Ä—É ‚Äî –ø—Ä–æ—Ö–æ–¥–∏—à—å 5 –º–∏—Å—Å–∏–π ‚Äî –∫–æ–ø–∏—à—å XP –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ‚Äî –ø–æ–ª—É—á–∞–µ—à—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ¬´–°—Ç—Ä–∞–∂ –ë–ª–æ–∫—á–µ–π–Ω–∞¬ª. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ –∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

### –û –ø—Ä–æ–µ–∫—Ç–µ (–∫–æ—Ä–æ—Ç–∫–æ)
Smart You ‚Äî —É—á–µ–±–Ω–∞—è –∏–≥—Ä–∞ –ø–æ Solidity. –ü–∏—à–µ—à—å –∫–æ–¥ ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—à—å –º–∏–Ω–∏‚Äë–∏–≥—Ä—É ‚Äî –ø—Ä–æ—Ö–æ–¥–∏—à—å 5 –º–∏—Å—Å–∏–π ‚Äî –∫–æ–ø–∏—à—å XP –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ‚Äî –ø–æ–ª—É—á–∞–µ—à—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ¬´–°—Ç—Ä–∞–∂ –ë–ª–æ–∫—á–µ–π–Ω–∞¬ª. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ –∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–≥—Ä—ã

- **5 —É—Ä–æ–≤–Ω–µ–π –æ–±—É—á–µ–Ω–∏—è**: –û—Ç –±–∞–∑–æ–≤–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –¥–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä** Solidity —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞  
- **–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏** –∏ –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- **AI-–ø–æ–º–æ—â–Ω–∏–∫ –æ—Ç Remix** –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞
- **–°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä–∞–¥**: XP, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è, –±–µ–π–¥–∂–∏, —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- **–ì–µ–π–º–ø–ª–µ–π**: –∫–æ–¥ ‚Üí —Å–∏–º—É–ª—è—Ü–∏—è ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## üèóÔ∏è –ß—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º (–∫–æ—Ä–æ—Ç–∫–æ)

- **Next.js + TypeScript** ‚Äî —Å–∞–π—Ç –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
- **PostgreSQL (Prisma)** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∫–æ–¥–∞ —É—Ä–æ–≤–Ω–µ–π, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- **Redis** ‚Äî –∫—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ—Ç—ã
- **BullMQ** ‚Äî —Ñ–æ–Ω–æ–≤—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
- **SWR** ‚Äî –±—ã—Å—Ç—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã

### –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ –≥–¥–µ –∏–º–µ–Ω–Ω–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- Frontend
  - Next.js 14 (App Router)
    - –°—Ç—Ä–∞–Ω–∏—Ü—ã: `src/app/page.tsx`, –∫–∞—Ä–∫–∞—Å `src/app/layout.tsx`
    - –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ä–æ—É—Ç—ã (API): `src/app/api/**/route.ts`
  - TypeScript ‚Äî —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–æ –≤—Å—ë–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
  - Tailwind CSS ‚Äî —Å—Ç–∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–±—ã—Å—Ç—Ä–æ –∏ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ)
  - SWR ‚Äî –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫—ç—à –∏ –ø—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API
    - –•—É–∫–∏: `src/lib/hooks.ts` (`useLeaderboard`, `useProgress`)
  - CodeMirror ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ Solidity
    - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `src/components/CodeMirrorEditor.tsx`
    - –í–∫–ª—é—á—ë–Ω –ª–µ–Ω–∏–≤–æ (dynamic import) –≤ `src/components/CodeEditor.tsx`
  - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Next dynamic import)
    - –ò–≥—Ä–∞ `FlexboxDefenseGame` ‚Äî –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É
    - –ú–æ–¥–∞–ª–∫–∏: `AchievementsModal`, `LeaderboardModal`, `RemixInfo` ‚Äî –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
  - next/image ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∫–æ–Ω–∫–∞ –≤ `RemixInfo`)

- Backend –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  - PostgreSQL + Prisma ‚Äî –≤—Å—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –∫–æ–¥–∞ —É—Ä–æ–≤–Ω–µ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î
    - –ú–æ–¥–µ–ª–∏: `User`, `Progress`, `CompletedLevel`, `UnlockedLevel`, `UserAchievement`, `AchievementDefinition`, `LevelCode`
    - –°—Ö–µ–º–∞: `prisma/schema.prisma` (–¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ `currentLevel` –∏ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ø–æ `userId/levelId`)
  - Redis (ioredis) ‚Äî –∫—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    - –ö—ç—à–∏—Ä—É—é—Ç—Å—è: –ø—Ä–æ–≥—Ä–µ—Å—Å (`progress:<name>`), –∫–æ–¥ —É—Ä–æ–≤–Ω—è (`levelcode:<name>:<level>`), –ª–∏–¥–µ—Ä–±–æ—Ä–¥ (`leaderboard:<category>`)
  - BullMQ worker ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
    - –í–æ—Ä–∫–µ—Ä: `src/workers/leaderboardWorker.ts` –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ –∏ –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Redis
    - –û—á–µ—Ä–µ–¥—å: `src/lib/queue.ts` + API `/api/leaderboard/rebuild`
  - Zod ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ API
    - –ü—Ä–∏–º–µ—Ä: `/api/compile` (–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç `code`, `runs`, `optimize`)
  - –ó–∞—â–∏—Ç–∞ –æ—Ç —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (rate limit) ‚Äî `/api/compile`
    - –õ–∏–º–∏—Ç: 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É –Ω–∞ IP

- Docker
  - –ú–Ω–æ–≥–æ—Å—Ç–∞–¥–∏–π–Ω—ã–π `Dockerfile` (Next.js standalone + —Å–±–æ—Ä–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞ –≤ `dist`)
  - `docker-compose.yml`: —Å–µ—Ä–≤–∏—Å—ã `db` (Postgres), `redis`, `web`, `worker`


## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–±–µ–∑ Docker)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ —Å yarn
yarn install
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É [http://localhost:3000](http://localhost:3000)

### –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω

```bash
npm run build
npm start
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –±–µ–∑ Docker)

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```bash
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/syblock?schema=public"
```

2. –ü–æ–¥–Ω–∏–º–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL (–ø—Ä–∏–º–µ—Ä –≤ `docker-compose.yml`) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π –∏–Ω—Å—Ç–∞–Ω—Å.

3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
npm install
npx prisma generate
npx prisma migrate dev --name init
```

4. –û—Ç–∫—Ä—ã—Ç—å Prisma Studio:

```bash
npx prisma studio
```

## üéÆ –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ –∏–≥—Ä–∞

### –£—Ä–æ–≤–Ω–∏

1. **–ö–æ—à–µ–ª–µ–∫ –≤ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –û—Å–Ω–æ–≤—ã —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
2. **–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ** - Mapping –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞  
3. **–†—ã–Ω–æ–∫ –º–∞–≥–∏–∏** - Struct –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
4. **DAO - –°–æ–≤–µ—Ç –∑–∞—â–∏—Ç–Ω–∏–∫–æ–≤** - –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
5. **–ò—Å–ø—ã—Ç–∞–Ω–∏–µ —Ö–∞–∫–µ—Ä–∞** - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É—è–∑–≤–∏–º–æ—Å—Ç–∏

### –°—Ö–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Header (Smart You)                    ‚îÇ
‚îÇ  [Remix] [–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è] [–õ–∏–¥–µ—Ä—ã] [–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç] [MetaMask]      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                      ‚îÇ                                      ‚îÇ
‚îÇ    –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞     ‚îÇ         –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å              ‚îÇ
‚îÇ      (CodeMirror)    ‚îÇ      (–∞–Ω–∏–º–∞—Ü–∏—è, –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ)         ‚îÇ
‚îÇ                      ‚îÇ                                      ‚îÇ
‚îÇ                      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                      ‚îÇ                                      ‚îÇ
‚îÇ                      ‚îÇ              –ö–æ–Ω—Å–æ–ª—å                 ‚îÇ
‚îÇ                      ‚îÇ           (–ª–æ–≥–∏ –∏ –æ—à–∏–±–∫–∏)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

- –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ: –∫–Ω–æ–ø–∫–∏ ¬´–°–±—Ä–æ—Å¬ª, ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª, ¬´–ü—Ä–∏–º–µ—Ä—ã¬ª, ¬´–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫¬ª, ¬´–ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å¬ª, —Å—Ç–∞—Ç—É—Å –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä ¬´–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ¬ª.
- –í —à–∞–ø–∫–µ: –º–æ–¥–∞–ª–∫–∏ ¬´–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è¬ª –∏ ¬´–õ–∏–¥–µ—Ä—ã¬ª –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ, ¬´–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç¬ª –∞–∫—Ç–∏–≤–µ–Ω –ø–æ—Å–ª–µ 5/5, ¬´MetaMask¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–¥—Ä–µ—Å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

### –ò–≥—Ä–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ (—á—Ç–æ –µ—Å—Ç—å —Å–µ–π—á–∞—Å)
- –ú–∏—Å—Å–∏–∏ (5 —É—Ä–æ–≤–Ω–µ–π) ‚Äî –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —É—Å–ø–µ—à–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–∏–Ω–∏‚Äë–∏–≥—Ä–∞.
- XP –∏ —É—Ä–æ–≤–Ω–∏ –∏–≥—Ä–æ–∫–∞ ‚Äî –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –º–∏—Å—Å–∏–π –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è.
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è ‚Äî –≤—ã–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–π—Ç–∏ 1 —É—Ä–æ–≤–µ–Ω—å, 5 —É—Ä–æ–≤–Ω–µ–π –∏ —Ç.–¥.).
- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ ‚Äî —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ XP/—Å–∫–æ—Ä–æ—Å—Ç–∏/–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º/—Å—Ç—Ä–æ–∫–∞–º –∫–æ–¥–∞.
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–∏ `completedLevels >= 5`, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ ¬´–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç¬ª, –º–æ–∂–Ω–æ —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å.

## üì¶ –ü–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–∫–æ—Ä–æ—Ç–∫–æ)

```
src/
‚îú‚îÄ app/              # —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ä–æ—É—Ç—ã
‚îú‚îÄ components/       # –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ (—Ä–µ–¥–∞–∫—Ç–æ—Ä, –∏–≥—Ä–∞, –º–æ–¥–∞–ª–∫–∏)
‚îú‚îÄ lib/              # –±–∞–∑–∞, –∫—ç—à, —Ö—É–∫–∏, –æ—á–µ—Ä–µ–¥—å
‚îú‚îÄ workers/          # —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–ª–∏–¥–µ—Ä–±–æ—Ä–¥)
‚îî‚îÄ prisma/           # –±–∞–∑–∞ (—Å—Ö–µ–º–∞)
```

---

### –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ –∏–º–µ–Ω–∏ (–º–æ–¥–∞–ª–∫–∞ ¬´–ò–º—è –∏–≥—Ä–æ–∫–∞¬ª –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞—Ö–æ–¥–µ). –ò–º—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î –∏ –ª–æ–∫–∞–ª—å–Ω–æ (—á—Ç–æ–±—ã –º–æ–¥–∞–ª–∫–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–ª–∞—Å—å).
- –ü—Ä–∏–≤—è–∑–∫–∞ MetaMask (–ø–æ –∫–Ω–æ–ø–∫–µ –≤ —à–∞–ø–∫–µ): —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
- –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ –æ—Ç `localStorage` –¥–ª—è –∫–æ–¥–∞ —É—Ä–æ–≤–Ω–µ–π:
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—á—Ç–µ–Ω–∏–µ –∫–æ–¥–∞ ‚Äî —á–µ—Ä–µ–∑ `/api/level-code` (Postgres + Redis)
  - –î–µ–±–∞—É–Ω—Å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ~400 –º—Å + –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä ¬´–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ¬ª
- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ –∏–∑ –ë–î, —Å —Ñ–æ–Ω–æ–≤–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π (BullMQ) –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ Redis.
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è: –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `UserAchievement` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (—Ç—Ä–∏–≥–≥–µ—Ä –≤ `/api/levels/complete`), —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ —É—Å–ª–æ–≤–∏—è–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1‚Äë–π —É—Ä–æ–≤–µ–Ω—å, 5 —É—Ä–æ–≤–Ω–µ–π –∏ —Ç.–¥.).
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç ¬´–°—Ç—Ä–∞–∂ –ë–ª–æ–∫—á–µ–π–Ω–∞¬ª ‚Äî –¥–æ—Å—Ç—É–ø–µ–Ω, –µ—Å–ª–∏ –ø—Ä–æ–π–¥–µ–Ω—ã –≤—Å–µ 5 –º–∏—Å—Å–∏–π (–∫–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—è–∂—ë–ª—ã—Ö —á–∞—Å—Ç–µ–π (–∏–≥—Ä–∞, –º–æ–¥–∞–ª–∫–∏, —Ä–µ–¥–∞–∫—Ç–æ—Ä) ‚Äî —É—Å–∫–æ—Ä—è–µ—Ç –ø–µ—Ä–≤—ã–π —ç–∫—Ä–∞–Ω.
- SWR‚Äë—Ö—É–∫–∏ (`useProgress`, `useLeaderboard`) ‚Äî —É–¥–æ–±–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è/–ª–∏–¥–µ—Ä–æ–≤, –º–µ–Ω—å—à–µ —Ä—É—á–Ω—ã—Ö fetch.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ)
- `src/app/`
  - `page.tsx` ‚Äî –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω: —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞, –º–∏–Ω–∏‚Äë–∏–≥—Ä–∞, –∫–æ–Ω—Å–æ–ª—å, –º–æ–¥–∞–ª–∫–∏
  - `layout.tsx` ‚Äî –æ–±—â–∏–π –∫–∞—Ä–∫–∞—Å, –∞–≤—Ç–æ‚Äë–ø–æ—Å–µ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ `/api/seed`
  - `api/`
    - `users/route.ts` ‚Äî –∏–º—è/–∫–æ—à–µ–ª—ë–∫
    - `progress/route.ts` ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å (GET ‚Äî –æ—Ç–¥–∞—ë—Ç, POST ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞)
    - `level-code/route.ts` ‚Äî –∫–æ–¥ —É—Ä–æ–≤–Ω—è (GET/POST —Å –∫—ç—à–µ–º, –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è)
    - `compile/route.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ Solidity (–≤–∞–ª–∏–¥–∞—Ç–æ—Ä + rate limit)
    - `leaderboard/route.ts` ‚Äî –æ—Ç–¥–∞—ë—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–∏–¥–µ—Ä–±–æ—Ä–¥; –ø—Ä–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
    - `leaderboard/rebuild/route.ts` ‚Äî —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –≤ –æ—á–µ—Ä–µ–¥—å
    - `levels/complete/route.ts` ‚Äî —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å, –≤—ã–¥–∞–µ—Ç –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ XP
    - `seed-achievements/route.ts`, `seed/route.ts` ‚Äî —Ä–∞–∑–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- `src/components/`
  - `GameHeader.tsx` ‚Äî –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å: ¬´Remix¬ª, ¬´–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è¬ª, ¬´–õ–∏–¥–µ—Ä—ã¬ª, ¬´–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç¬ª, ¬´MetaMask¬ª
  - `CodeEditor.tsx` ‚Äî —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–°–±—Ä–æ—Å¬ª, ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª, ¬´–ü—Ä–∏–º–µ—Ä—ã¬ª, ¬´–ö–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å¬ª, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –∏ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  - `FlexboxDefenseGame.tsx` ‚Äî –º–∏–Ω–∏‚Äë–∏–≥—Ä–∞ (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
  - –ú–æ–¥–∞–ª–∫–∏: `AchievementsModal.tsx`, `LeaderboardModal.tsx`, `CertificateModal.tsx`, `RemixInfo.tsx`, `UsernameModal.tsx`
  - –ü—Ä–æ—á–∏–µ: `Console.tsx`, `LevelInfo.tsx`, `AIAssistant.tsx` –∏ —Ç.–¥.
- `src/lib/`
  - `prisma.ts` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
  - `redis.ts` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis (–Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–¥ BullMQ)
  - `hooks.ts` ‚Äî SWR‚Äë—Ö—É–∫–∏ `useProgress`, `useLeaderboard`
  - `queue.ts` ‚Äî –æ—á–µ—Ä–µ–¥—å –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞
  - `gameStorage.ts` ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (—Ç–µ–ø–µ—Ä—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ –ë–î)
- `src/workers/leaderboardWorker.ts` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–¥–∞—á: —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î, —Å—Ç—Ä–æ–∏—Ç –ª–∏–¥–µ—Ä–±–æ—Ä–¥, –∫–ª–∞–¥—ë—Ç –≤ Redis
- `prisma/schema.prisma` ‚Äî —Å—Ö–µ–º–∞ –ë–î —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- `Dockerfile`, `docker-compose.yml` ‚Äî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞

---

## üéØ –ü—Ä–æ—Å—Ç–æ–µ –¢–ó (–∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è)
1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –≤–≤–µ–¥–∏ –∏–º—è. –ú–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å MetaMask.
2. –ü–∏—à–∏ Solidity‚Äë–∫–æ–¥, –∂–º–∏ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å¬ª.
3. –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî –∏–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø—Ä–æ—Ö–æ–¥–∏ –º–∏—Å—Å–∏—é –∏ –ø–æ–ª—É—á–∞–π –æ–ø—ã—Ç.
4. –°–º–æ—Ç—Ä–∏ —Å–µ–±—è –≤ ¬´–õ–∏–¥–µ—Ä–∞—Ö¬ª. –ü–æ—Å–ª–µ 5 –º–∏—Å—Å–∏–π ‚Äî ¬´–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç¬ª.

---

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±)
–¢—Ä–µ–±—É–µ—Ç—Å—è Docker Desktop.

1) –°–æ–∑–¥–∞–π `.env` –≤ –∫–æ—Ä–Ω–µ:
```bash
DATABASE_URL="postgresql://postgres:postgres@db:5432/syblock?schema=public"
REDIS_URL="redis://redis:6379"
```

2) –ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë:
```bash
docker compose up -d
```

3) –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç:
- http://localhost:3000

–ï—Å–ª–∏ 3000 –∑–∞–Ω—è—Ç ‚Äî –ø–æ–º–µ–Ω—è–π –≤ `docker-compose.yml` –Ω–∞ `3001:3000`, —Å–Ω–æ–≤–∞ `docker compose up -d`.

–ü–æ–¥–Ω–∏–º–∞—é—Ç—Å—è:
- `db` ‚Äî PostgreSQL
- `redis` ‚Äî –∫—ç—à
- `web` ‚Äî —Å–∞–π—Ç
- `worker` ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –ª–∏–¥–µ—Ä—ã

–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –ª–∏–¥–µ—Ä–æ–≤ –≤—Ä—É—á–Ω—É—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
curl -X POST http://localhost:3000/api/leaderboard/rebuild
```

---

## üôå –î–ª—è –∫–æ–≥–æ –∏ –∑–∞—á–µ–º
–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö. –ß—Ç–æ–±—ã –±–µ–∑ —Å–∫—É–∫–∏ –∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª–æ–≤ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º —Å–º–∞—Ä—Ç‚Äë–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤. –¢—É—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–±–æ–≤–∞—Ç—å, –æ—à–∏–±–∞—Ç—å—Å—è –∏ —É—á–∏—Ç—å—Å—è.

–£–¥–∞—á–∏ –∏ –ø—Ä–∏—è—Ç–Ω–æ–π –∏–≥—Ä—ã! üöÄ